{"ppGraph":{"code":"{\"ioPorts\":[{\"type\":\"sampler2D\",\"name\":\"IN_bluenoise\",\"valueTex\":{\"base64_name\":\"bluenoise\",\"base64_data\":\"data:image/png;base64,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\"}},{\"type\":\"float\",\"name\":\"IN_focalDepth\",\"valueX\":384.128},{\"type\":\"vec4\",\"name\":\"OUT_fragOut\",\"valueX\":1,\"valueY\":0,\"valueZ\":0,\"valueW\":1},{\"type\":\"vec4\",\"name\":\"OUT_dofRT\",\"valueX\":0.5,\"valueY\":0.5,\"valueZ\":1,\"valueW\":2},{\"type\":\"sampler2D\",\"name\":\"IN_dofRT\",\"valueTex\":\"dofRT\"},{\"type\":\"vec4\",\"name\":\"OUT_focalDist0RT\",\"valueX\":0.01,\"valueY\":0.01,\"valueZ\":1,\"valueW\":0},{\"type\":\"vec4\",\"name\":\"OUT_focalDist1RT\",\"valueX\":0.01,\"valueY\":0.01,\"valueZ\":1,\"valueW\":1},{\"type\":\"sampler2D\",\"name\":\"IN_focalDist0RT\",\"valueTex\":\"focalDist0RT\"},{\"type\":\"sampler2D\",\"name\":\"IN_focalDist1RT\",\"valueTex\":\"focalDist1RT\"},{\"type\":\"float\",\"name\":\"IN_focalDepthBlend\",\"valueX\":0.125},{\"type\":\"vec4\",\"name\":\"OUT_blurxRT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":3},{\"type\":\"sampler2D\",\"name\":\"IN_blurxRT\",\"valueTex\":\"blurxRT\"},{\"type\":\"vec4\",\"name\":\"OUT_bluryRT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":4},{\"type\":\"sampler2D\",\"name\":\"IN_bluryRT\",\"valueTex\":\"bluryRT\"},{\"type\":\"vec4\",\"name\":\"OUT_blurx1RT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":5},{\"type\":\"sampler2D\",\"name\":\"IN_blurx1RT\",\"valueTex\":\"blurx1RT\"},{\"type\":\"vec4\",\"name\":\"OUT_blury1RT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":6},{\"type\":\"sampler2D\",\"name\":\"IN_blury1RT\",\"valueTex\":\"blury1RT\"}],\"subGraphs\":[{\"subgName\":\"uv0\"},{\"subgName\":\"scSampPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"denoisePS\"},{\"subgName\":\"uv0\"},{\"subgName\":\"copyFocalDepthPS\"},{\"subgName\":\"updateFocalDepthPS\"},{\"subgName\":\"readFocalDepthPS\"},{\"subgName\":\"passXPS\"},{\"subgName\":\"passYPS\"},{\"subgName\":\"passZPS\"},{\"subgName\":\"passX1PS\"},{\"subgName\":\"passY1PS\"},{\"subgName\":\"passY1PS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"passZ1PS\"},{\"subgName\":\"blendDofPS\"}],\"connections\":[{\"srcIndex\":0,\"srcPortName\":\"OUT_ret\",\"dstIndex\":2,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_bluenoise\",\"dstIndex\":2,\"dstPortName\":\"IN_noise\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDepth\",\"dstIndex\":11,\"dstPortName\":\"IN_focalDepth\"},{\"srcIndex\":2,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_dofRT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":13,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":13,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":15,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_bg\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist1RT\",\"dstIndex\":10,\"dstPortName\":\"IN_fd1RT\"},{\"srcIndex\":10,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_focalDist0RT\"},{\"srcIndex\":11,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_focalDist1RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist0RT\",\"dstIndex\":11,\"dstPortName\":\"IN_fd0RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDepthBlend\",\"dstIndex\":11,\"dstPortName\":\"IN_alpha\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist1RT\",\"dstIndex\":12,\"dstPortName\":\"IN_fd1RT\"},{\"srcIndex\":12,\"srcPortName\":\"OUT_ret\",\"dstIndex\":2,\"dstPortName\":\"IN_focalDepth\"},{\"srcIndex\":13,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_blurxRT\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":14,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurxRT\",\"dstIndex\":14,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":14,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_bluryRT\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":15,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurxRT\",\"dstIndex\":15,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":16,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":16,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":16,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_blurx1RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurx1RT\",\"dstIndex\":17,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":17,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":17,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_blury1RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":15,\"dstPortName\":\"IN_tex0\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurx1RT\",\"dstIndex\":20,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":20,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":20,\"dstPortName\":\"IN_tex0\"},{\"srcIndex\":20,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_fg\"},{\"srcIndex\":21,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_fragOut\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":21,\"dstPortName\":\"IN_tex0\"}]}","meta":"{\"port\":[{\"x\":-3.6636338233947754,\"y\":-1.214484453201294,\"port_name\":\"IN_bluenoise\",\"port_index\":0,\"pstring\":\"in sampler2D bluenoise bluenoise\"},{\"x\":0.42796286940574646,\"y\":2.7153241634368896,\"port_name\":\"IN_focalDepth\",\"port_index\":1,\"pstring\":\"in float focalDepth 384.128\"},{\"x\":16.431957244873047,\"y\":-3.1537179946899414,\"port_name\":\"OUT_fragOut\",\"port_index\":2,\"pstring\":\"out vec4 fragOut 1,0,0,1\"},{\"x\":2.278275489807129,\"y\":0.12839120626449585,\"port_name\":\"OUT_dofRT\",\"port_index\":3,\"pstring\":\"out vec4 dofRT 0.5,0.5,1,2\"},{\"x\":2.295961856842041,\"y\":-1.2568426132202148,\"port_name\":\"IN_dofRT\",\"port_index\":4,\"pstring\":\"in sampler2D dofRT dofRT\"},{\"x\":0.4579322338104248,\"y\":5.262831687927246,\"port_name\":\"OUT_focalDist0RT\",\"port_index\":5,\"pstring\":\"out vec4 focalDist0RT 0.01,0.01,1,0\"},{\"x\":3.8141918182373047,\"y\":3.137967348098755,\"port_name\":\"OUT_focalDist1RT\",\"port_index\":6,\"pstring\":\"out vec4 focalDist1RT 0.01,0.01,1,1\"},{\"x\":0.4505465626716614,\"y\":4.0032758712768555,\"port_name\":\"IN_focalDist0RT\",\"port_index\":7,\"pstring\":\"in sampler2D focalDist0RT focalDist0RT\"},{\"x\":-3.681140661239624,\"y\":3.4836010932922363,\"port_name\":\"IN_focalDist1RT\",\"port_index\":8,\"pstring\":\"in sampler2D focalDist1RT focalDist1RT\"},{\"x\":0.42923495173454285,\"y\":1.4240440130233765,\"port_name\":\"IN_focalDepthBlend\",\"port_index\":9,\"pstring\":\"in float focalDepthBlend 0.125\"},{\"x\":6.21817684173584,\"y\":0.4570638835430145,\"port_name\":\"OUT_blurxRT\",\"port_index\":10,\"pstring\":\"out vec4 blurxRT 1.0,1.0,1,3\"},{\"x\":6.196924686431885,\"y\":-0.9034963846206665,\"port_name\":\"IN_blurxRT\",\"port_index\":11,\"pstring\":\"in sampler2D blurxRT blurxRT\"},{\"x\":10.672451972961426,\"y\":0.48699289560317993,\"port_name\":\"OUT_bluryRT\",\"port_index\":12,\"pstring\":\"out vec4 bluryRT 1.0,1.0,1,4\"},{\"x\":10.667970657348633,\"y\":-0.8525869846343994,\"port_name\":\"IN_bluryRT\",\"port_index\":13,\"pstring\":\"in sampler2D bluryRT bluryRT\"},{\"x\":6.2344069480896,\"y\":-3.6341259479522705,\"port_name\":\"OUT_blurx1RT\",\"port_index\":14,\"pstring\":\"out vec4 blurx1RT 1.0,1.0,1,5\"},{\"x\":6.2657318115234375,\"y\":-5.0125861167907715,\"port_name\":\"IN_blurx1RT\",\"port_index\":15,\"pstring\":\"in sampler2D blurx1RT blurx1RT\"},{\"x\":10.670767784118652,\"y\":-3.404754638671875,\"port_name\":\"OUT_blury1RT\",\"port_index\":16,\"pstring\":\"out vec4 blury1RT 1.0,1.0,1,6\"},{\"x\":10.712166786193848,\"y\":-4.731754779815674,\"port_name\":\"IN_blury1RT\",\"port_index\":17,\"pstring\":\"in sampler2D blury1RT blury1RT\"}],\"subg\":[{\"x\":-3.6376020908355713,\"y\":0.09536784887313843,\"func_name\":\"uv0\",\"uid\":0,\"preview_port_name\":\"OUT_ret\"},{\"x\":-2.4195945262908936,\"y\":8.578885078430176,\"func_name\":\"scSampPS\",\"uid\":2},{\"x\":-0.5119689702987671,\"y\":0.2722567319869995,\"func_name\":\"dofTestPS\",\"uid\":4,\"preview_port_name\":\"OUT_ret\"},{\"x\":0.5698967576026917,\"y\":8.85678768157959,\"func_name\":\"dofTestPS\",\"uid\":5},{\"x\":2.225726842880249,\"y\":8.980792999267578,\"func_name\":\"dofTestPS\",\"uid\":7},{\"x\":3.6896307468414307,\"y\":8.862025260925293,\"func_name\":\"dofTestPS\",\"uid\":8},{\"x\":5.1909003257751465,\"y\":9.104592323303223,\"func_name\":\"dofTestPS\",\"uid\":10},{\"x\":-0.8588934540748596,\"y\":8.815156936645508,\"func_name\":\"dofTestPS\",\"uid\":12},{\"x\":6.943462371826172,\"y\":8.914237022399902,\"func_name\":\"denoisePS\",\"uid\":1,\"preview_port_name\":\"OUT_ret\"},{\"x\":2.1140902042388916,\"y\":-3.159510850906372,\"func_name\":\"uv0\",\"uid\":3,\"preview_port_name\":\"OUT_ret\"},{\"x\":-1.6338797807693481,\"y\":5.283062934875488,\"func_name\":\"copyFocalDepthPS\",\"uid\":13,\"preview_port_name\":\"OUT_ret\"},{\"x\":2.130326747894287,\"y\":3.141526699066162,\"func_name\":\"updateFocalDepthPS\",\"uid\":15,\"preview_port_name\":\"OUT_ret\"},{\"x\":-1.72267746925354,\"y\":1.0833332538604736,\"func_name\":\"readFocalDepthPS\",\"uid\":16},{\"x\":4.340981483459473,\"y\":-0.7717469930648804,\"func_name\":\"passXPS\",\"uid\":2},{\"x\":8.472722053527832,\"y\":-0.6000009775161743,\"func_name\":\"passYPS\",\"uid\":4,\"preview_port_name\":\"OUT_ret\"},{\"x\":12.834689140319824,\"y\":-1.9116097688674927,\"func_name\":\"passZPS\",\"uid\":17},{\"x\":4.307692050933838,\"y\":-3.900420904159546,\"func_name\":\"passX1PS\",\"uid\":0},{\"x\":8.317769050598145,\"y\":-3.6811182498931885,\"func_name\":\"passY1PS\",\"uid\":2},{\"x\":8.611469268798828,\"y\":9.420977592468262,\"func_name\":\"passY1PS\",\"uid\":18},{\"x\":10.517481803894043,\"y\":9.020976066589355,\"func_name\":\"dofTestPS\",\"uid\":0},{\"x\":12.874129295349121,\"y\":-3.945450782775879,\"func_name\":\"passZ1PS\",\"uid\":0,\"preview_port_name\":\"OUT_ret\"},{\"x\":14.755806922912598,\"y\":-3.0545451641082764,\"func_name\":\"blendDofPS\",\"uid\":1}],\"con\":[{\"x\":-3.1376020908355713,\"y\":-0.4546321630477905,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":-1.011968970298767,\"dy\":-0.4877432584762573},{\"x\":-3.1636338233947754,\"y\":-1.7644844055175781,\"valType\":\"\",\"src_name\":\"IN_bluenoise\",\"dst_name\":\"IN_noise\",\"dx\":-1.011968970298767,\"dy\":-0.69774329662323},{\"x\":0.9279628992080688,\"y\":2.1653242111206055,\"valType\":\"\",\"src_name\":\"IN_focalDepth\",\"dst_name\":\"IN_focalDepth\",\"dx\":1.630326747894287,\"dy\":2.1715266704559326},{\"x\":-0.01196897029876709,\"y\":-0.27774327993392944,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_dofRT\",\"dx\":1.778275489807129,\"dy\":-0.4216088056564331},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex\",\"dx\":3.8409814834594727,\"dy\":-1.5317469835281372},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":3.8409814834594727,\"dy\":-1.7417470216751099},{\"x\":13.334689140319824,\"y\":-2.4616098403930664,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_bg\",\"dx\":14.255806922912598,\"dy\":-3.814545154571533},{\"x\":-3.181140661239624,\"y\":2.933601140975952,\"valType\":\"\",\"src_name\":\"IN_focalDist1RT\",\"dst_name\":\"IN_fd1RT\",\"dx\":-2.1338796615600586,\"dy\":4.523062705993652},{\"x\":-1.1338797807693481,\"y\":4.733062744140625,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_focalDist0RT\",\"dx\":-0.042067766189575195,\"dy\":4.712831497192383},{\"x\":2.630326747894287,\"y\":2.591526746749878,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_focalDist1RT\",\"dx\":3.3141918182373047,\"dy\":2.5879673957824707},{\"x\":0.9505465626716614,\"y\":3.4532759189605713,\"valType\":\"\",\"src_name\":\"IN_focalDist0RT\",\"dst_name\":\"IN_fd0RT\",\"dx\":1.630326747894287,\"dy\":2.3815267086029053},{\"x\":0.9292349815368652,\"y\":0.8740440011024475,\"valType\":\"\",\"src_name\":\"IN_focalDepthBlend\",\"dst_name\":\"IN_alpha\",\"dx\":1.630326747894287,\"dy\":1.9615267515182495},{\"x\":-3.181140661239624,\"y\":2.933601140975952,\"valType\":\"\",\"src_name\":\"IN_focalDist1RT\",\"dst_name\":\"IN_fd1RT\",\"dx\":-2.22267746925354,\"dy\":0.3233332633972168},{\"x\":-1.22267746925354,\"y\":0.5333332419395447,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_focalDepth\",\"dx\":-1.011968970298767,\"dy\":-0.9077432155609131},{\"x\":4.840981483459473,\"y\":-1.321747064590454,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_blurxRT\",\"dx\":5.71817684173584,\"dy\":-0.09293612837791443},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":7.972722053527832,\"dy\":-1.5700010061264038},{\"x\":6.696924686431885,\"y\":-1.4534964561462402,\"valType\":\"\",\"src_name\":\"IN_blurxRT\",\"dst_name\":\"IN_tex\",\"dx\":7.972722053527832,\"dy\":-1.3600009679794312},{\"x\":8.972722053527832,\"y\":-1.150001049041748,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_bluryRT\",\"dx\":10.172451972961426,\"dy\":-0.06300711631774902},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":12.334689140319824,\"dy\":-2.8816099166870117},{\"x\":6.696924686431885,\"y\":-1.4534964561462402,\"valType\":\"\",\"src_name\":\"IN_blurxRT\",\"dst_name\":\"IN_tex\",\"dx\":12.334689140319824,\"dy\":-2.671609878540039},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":3.807692050933838,\"dy\":-4.870420932769775},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex\",\"dx\":3.807692050933838,\"dy\":-4.660420894622803},{\"x\":4.807692050933838,\"y\":-4.45042085647583,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_blurx1RT\",\"dx\":5.7344069480896,\"dy\":-4.184125900268555},{\"x\":6.7657318115234375,\"y\":-5.562586307525635,\"valType\":\"\",\"src_name\":\"IN_blurx1RT\",\"dst_name\":\"IN_tex\",\"dx\":7.8177690505981445,\"dy\":-4.441118240356445},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":7.8177690505981445,\"dy\":-4.651118278503418},{\"x\":8.817769050598145,\"y\":-4.231118202209473,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_blury1RT\",\"dx\":10.170767784118652,\"dy\":-3.954754590988159},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":12.334689140319824,\"dy\":-3.0916097164154053},{\"x\":6.7657318115234375,\"y\":-5.562586307525635,\"valType\":\"\",\"src_name\":\"IN_blurx1RT\",\"dst_name\":\"IN_tex\",\"dx\":12.374129295349121,\"dy\":-4.705451011657715},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":12.374129295349121,\"dy\":-4.9154510498046875},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":12.374129295349121,\"dy\":-5.125450611114502},{\"x\":13.374129295349121,\"y\":-4.495450973510742,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_fg\",\"dx\":14.255806922912598,\"dy\":-4.024545192718506},{\"x\":15.255806922912598,\"y\":-3.6045451164245605,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_fragOut\",\"dx\":15.931957244873047,\"dy\":-3.7037179470062256},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":14.255806922912598,\"dy\":-4.2345452308654785},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":14.255806922912598,\"dy\":-4.444545269012451}]}"},"uv0":{"code":"vec2 uv0(){return vUv0;}","meta":""},"scSampPS":{"code":"vec4 scSampPS(in vec2 uv){return texture2D(uColorBuffer,uv);}","meta":""},"dofTestPS":{"code":"vec4 dofTestPS(in vec2 uv, in sampler2D noise, in float focalDepth)\n{\n#ifndef PREVIEW_MAT\n    float d0 = abs(getLinearScreenDepth(uv));\n#else\n    float d0 = texture2D(uDepthMap,uv).r*32.0;\n#endif    \n    vec4 col0 = texture2D(uColorBuffer,uv);\n\n    float focallength = 0.05; //50mm\n    float aperture = focallength/1.8; //f/1.8\n    float filmpixelsize = 0.035/(1080.0/16.0); //35mm\n\n    float CoC = (aperture * (focallength * (d0 - focalDepth)) / (d0 * (focalDepth - focallength)));\n\n    return vec4(floor(d0)/256.0f,fract(d0),clamp(-CoC/filmpixelsize,0.0,1.0),clamp(CoC/filmpixelsize,0.0,1.0));\n    //return vec4(vec3(fract(d0),0,fract(CoC/filmpixelsize)),1);\n}","meta":""},"denoisePS":{"code":"vec4 denoisePS(in sampler2D tex, in vec2 uv) \n{\n    //from: https://www.shadertoy.com/view/ldKBzG\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n    vec2 fragCoord = uv*texRes;\n\n    vec2 offset[25];\n    offset[0] = vec2(-2,-2);\n    offset[1] = vec2(-1,-2);\n    offset[2] = vec2(0,-2);\n    offset[3] = vec2(1,-2);\n    offset[4] = vec2(2,-2);\n    \n    offset[5] = vec2(-2,-1);\n    offset[6] = vec2(-1,-1);\n    offset[7] = vec2(0,-1);\n    offset[8] = vec2(1,-1);\n    offset[9] = vec2(2,-1);\n    \n    offset[10] = vec2(-2,0);\n    offset[11] = vec2(-1,0);\n    offset[12] = vec2(0,0);\n    offset[13] = vec2(1,0);\n    offset[14] = vec2(2,0);\n    \n    offset[15] = vec2(-2,1);\n    offset[16] = vec2(-1,1);\n    offset[17] = vec2(0,1);\n    offset[18] = vec2(1,1);\n    offset[19] = vec2(2,1);\n    \n    offset[20] = vec2(-2,2);\n    offset[21] = vec2(-1,2);\n    offset[22] = vec2(0,2);\n    offset[23] = vec2(1,2);\n    offset[24] = vec2(2,2);\n    \n    \n    float kernel[25];\n    kernel[0] = 1.0f/256.0f;\n    kernel[1] = 1.0f/64.0f;\n    kernel[2] = 3.0f/128.0f;\n    kernel[3] = 1.0f/64.0f;\n    kernel[4] = 1.0f/256.0f;\n    \n    kernel[5] = 1.0f/64.0f;\n    kernel[6] = 1.0f/16.0f;\n    kernel[7] = 3.0f/32.0f;\n    kernel[8] = 1.0f/16.0f;\n    kernel[9] = 1.0f/64.0f;\n    \n    kernel[10] = 3.0f/128.0f;\n    kernel[11] = 3.0f/32.0f;\n    kernel[12] = 9.0f/64.0f;\n    kernel[13] = 3.0f/32.0f;\n    kernel[14] = 3.0f/128.0f;\n    \n    kernel[15] = 1.0f/64.0f;\n    kernel[16] = 1.0f/16.0f;\n    kernel[17] = 3.0f/32.0f;\n    kernel[18] = 1.0f/16.0f;\n    kernel[19] = 1.0f/64.0f;\n    \n    kernel[20] = 1.0f/256.0f;\n    kernel[21] = 1.0f/64.0f;\n    kernel[22] = 3.0f/128.0f;\n    kernel[23] = 1.0f/64.0f;\n    kernel[24] = 1.0f/256.0f;\n    \n    vec3 sum = vec3(0.0);\n    vec3 sum_f = vec3(0.0);\n    float c_phi = 1.0;\n    float r_phi = 1.0;\n    float n_phi = 0.5;\n    float p_phi = 0.25;\n    \n\t//vec3 cval = texelFetch(iChannel0, ivec2(fragCoord), 0).xyz;\n    float maxCoc = texture2D(tex, uv).w;\n    vec3 cval = texture2D(tex, uv).xyz;\n    //vec3 rval = texelFetch(iChannel2, ivec2(fragCoord), 0).xyz;\n\t//vec3 nval = texelFetch(iChannel1, ivec2(fragCoord), 0).xyz;\n\n    //float ang = 2.0*3.1415926535*hash1(251.12860182*fragCoord.x + 729.9126812*fragCoord.y+5.1839513*iTime);\n    float ang = 2.0*3.1415926535*fract(sin(251.12860182*fragCoord.x + 729.9126812*fragCoord.y+5.1839513*uTime)*43758.5453123);\n\n\tmat2 m = mat2(cos(ang),sin(ang),-sin(ang),cos(ang));\n    \n    float cum_w = 0.0;\n    float cum_fw = 0.0;\n\n    //float denoiseStrength = (DENOISE_RANGE.x + (DENOISE_RANGE.y-DENOISE_RANGE.x)*hash1(641.128752*fragCoord.x + 312.321374*fragCoord.y+1.92357812*iTime));    \n    float denoiseStrength = (vec2(1, 4).x + (vec2(1, 4).y-vec2(1, 4).x)*fract(sin(641.128752*fragCoord.x + 312.321374*fragCoord.y+1.92357812*uTime)*43758.5453123));\n    \n    // denoiseStrength*=float(maxCoc>0.5);\n    float mcsum=0.0;\n\n    for(int i=0; i<25; i++)\n    {\n        vec2 t_uv = (fragCoord+m*(offset[i]* denoiseStrength))*oo_texRes;\n        \n        //maxCoc = max(maxCoc, texture2D(tex, t_uv).w);\n        float mc = texture2D(tex, t_uv).w;\n        vec3 ctmp = texture2D(tex, t_uv).xyz;\n        vec3 t = cval - ctmp;\n        float dist2 = dot(t,t);\n        float c_w = min(exp(-(dist2)/c_phi), 1.0);\n        \n /*       vec3 ntmp = texture(iChannel1, uv).xyz;\n        t = nval - ntmp;\n        dist2 = max(dot(t,t), 0.0);\n        float n_w = min(exp(-(dist2)/n_phi), 1.0);\n        \n        vec3 rtmp = texture(iChannel2, uv).xyz;\n        t = rval - rtmp;\n        dist2 = dot(t,t);\n        float r_w = min(exp(-(dist2)/r_phi), 1.0);*/\n        \n        // new denoised frame\n        float weight0 = c_w;//*n_w;\n        sum += ctmp*weight0*kernel[i];\n        cum_w += weight0*kernel[i];\n        mcsum += mc*weight0*kernel[i];\n        // denoise the previous denoised frame again\n//        float weight1 = r_w*n_w;\n//        sum_f += rtmp*weight1*kernel[i];\n//        cum_fw += weight1*kernel[i];\n    }\n    \n    // mix in more of the just-denoised frame if it differs significantly from the\n    // frame from feedback\n//    vec3 ptmp = texture(iChannel2, fragCoord/iResolution.xy).xyz;\n//    vec3 t = sum/cum_w - ptmp;\n//    float dist2 = dot(t,t);\n//    float p_w = min(exp(-(dist2)/p_phi), 1.0);\n    \n//    fragColor = clamp(vec4(mix(sum/cum_w,sum_f/cum_fw,p_w),0.0),0.0,1.0);\n\n    // return clamp(vec4(vec3(sum/cum_w)*vec3(1,1,1),1.0),0.0,1.0);\n\n    maxCoc=mix(maxCoc,clamp((mcsum/cum_w),0.0,1.0),float(cum_w>0.0));\n\n    float alpha = clamp((maxCoc-0.0)*4.0, 0.0, 1.0);\n\n    vec3 col0 = texture2D(uColorBuffer,uv).rgb;\n\n    vec3 ret=mix(col0,clamp(vec3(sum/cum_w),0.0,1.0),alpha);\n\n    return clamp(vec4(ret,1.0),0.0,1.0);\n}","meta":""},"copyFocalDepthPS":{"code":"vec4 copyFocalDepthPS(in sampler2D fd1RT)\n{\n    return texture2D(fd1RT, vec2(0,0));\n}","meta":""},"updateFocalDepthPS":{"code":"vec4 updateFocalDepthPS(in sampler2D fd0RT, in float focalDepth, in float alpha)\n{\n    ivec2 tsizei = textureSize(uDepthMap,0);\n    float aspect=float(tsizei.y)/float(tsizei.x);\n    \n    float tsize=float(tsizei.y);\n    float ootsize = 1.0/tsize;\n\n    float tsizex=float(tsizei.x);\n    float ootsizex = 1.0/tsizex;\n\n    vec2 fuv=vec2(floor(focalDepth)*ootsizex, 1.0-fract(focalDepth)*3000.0*ootsize);\n    #ifndef PREVIEW_MAT\n        float focalDepth0 = abs(getLinearScreenDepth(fuv));\n    #else\n        float focalDepth0 = texture2D(uDepthMap,fuv).r*32.0;\n    #endif    \n\n    vec4 rgbaDepth = texture2D(fd0RT, vec2(0,0));\n    const vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    float prevDepth = dot(rgbaDepth, bitShift)*200.0;\n\n    float blendedDepth = mix(prevDepth,min(focalDepth0,200.0), alpha);\n\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n\n    // combination of mod and multiplication and division works better\n    vec4 res = mod((blendedDepth/200.0) * bit_shift * vec4(255), vec4(256) ) / vec4(255);\n    res -= res.xxyz * bit_mask;\n    return res;\n}","meta":""},"readFocalDepthPS":{"code":"float readFocalDepthPS(in sampler2D fd1RT)\n{\n    vec4 rgbaDepth = texture2D(fd1RT, vec2(0,0));\n    const vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    return dot(rgbaDepth, bitShift)*200.0;\n}","meta":""},"passYPS":{"code":"vec4 passYPS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 64;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    const float a = 1.0;\n    const float b = 0.5;\n    \n    vec2 uv0=uv*0.5+vec2(0,0);\n    vec2 uv1=uv*0.5+vec2(0,0.5);\n    vec2 uv2=uv*0.5+vec2(0.5,0);\n    vec2 uv3=uv*0.5+vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(sqrt(ret*(1.0/w)),1);\n}","meta":""},"passXPS":{"code":"vec4 passXPS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(uColorBuffer,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec2 quv=fract(uv*2.0);\n\n    float quad = float(uv.x>=0.5)*2.0+float(uv.y>=0.5)*1.0;\n\n    float cocScale = texture2D(tex,quv).a;\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec3 col = texture2D(uColorBuffer,quv+vec2(oo_texRes.x*float(n)*cocScale,0)).rgb;\n\n        float k = 0.0;\n        if (quad == 0.0) //real 1\n        {\n            k = cos(x*x*5.3)*exp(x*x*-0.84);\n        }\n        if (quad == 1.0) //imag 1\n        {\n            k = sin(x*x*5.3)*exp(x*x*-0.84);    \n        }   \n        if (quad == 2.0) //real 2\n        {\n            k = cos(x*x*1.6)*exp(x*x*-2.1);       \n        }        \n        if (quad == 3.0) //imag 2\n        {\n            k = sin(x*x*1.6)*exp(x*x*-2.1);            \n        }               \n\n        ret += pow(col,vec3(2.0))*k;\n        w += 1.0;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passZPS":{"code":"vec4 passZPS(in sampler2D tex, in vec2 uv,in sampler2D tex0)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    float cocScale = texture2D(tex0,uv).a;\n    \n    vec2 uv0=vec2(0,0);\n    vec2 uv1=vec2(0,0.5);\n    vec2 uv2=vec2(0.5,0);\n    vec2 uv3=vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec2 quv = clamp(uv*0.5+vec2(0,oo_texRes.y*float(n)*0.5*cocScale),vec2(0.0),vec2(0.5));\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+quv).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+quv).rgb;\n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+quv).rgb;\n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+quv).rgb;\n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(pow(ret*(1.0/w),vec3(1.0/2.0)),1);\n    //return vec4(sqrt(sqrt(ret*(1.0/w))),1);\n}","meta":""},"passX1PS":{"code":"vec4 passX1PS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(uColorBuffer,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec2 quv=fract(uv*2.0);\n\n    float quad = float(uv.x>=0.5)*2.0+float(uv.y>=0.5)*1.0;\n\n    float cocScale = texture2D(tex,quv).b;\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec3 col = texture2D(uColorBuffer,quv+vec2(oo_texRes.x*float(n)*cocScale,0)).rgb;\n\n        float k = 0.0;\n        if (quad == 0.0) //real 1\n        {\n            k = cos(x*x*5.3)*exp(x*x*-0.84);\n        }\n        if (quad == 1.0) //imag 1\n        {\n            k = sin(x*x*5.3)*exp(x*x*-0.84);    \n        }   \n        if (quad == 2.0) //real 2\n        {\n            k = cos(x*x*1.6)*exp(x*x*-2.1);       \n        }        \n        if (quad == 3.0) //imag 2\n        {\n            k = sin(x*x*1.6)*exp(x*x*-2.1);            \n        }               \n\n        ret += pow(col,vec3(2.0))*k;\n        w += 1.0;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passY1PS":{"code":"vec4 passY1PS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 64;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float k = sin(abs(float(n)/float(S))*3.141*2.0)+1.0;\n        k=k*k;\n        ret += texture2D(tex,uv+vec2(0,oo_texRes.y*float(n))).rgb*k;\n        w += k;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passZ1PS":{"code":"vec4 passZ1PS(in sampler2D tex, in vec2 uv,in sampler2D tex0)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    float cocScale = texture2D(tex0,uv).b;\n    \n    vec2 uv0=vec2(0,0);\n    vec2 uv1=vec2(0,0.5);\n    vec2 uv2=vec2(0.5,0);\n    vec2 uv3=vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec2 quv = clamp(uv*0.5+vec2(0,oo_texRes.y*float(n)*0.5*cocScale),vec2(0.0),vec2(0.5));\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+quv).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+quv).rgb;\n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+quv).rgb;\n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+quv).rgb;\n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(pow(ret*(1.0/w),vec3(1.0/2.0)),1);\n    //return vec4(sqrt(sqrt(ret*(1.0/w))),1);\n}","meta":""},"blendDofPS":{"code":"vec4 blendDofPS(in vec4 bg, in vec4 fg, in vec2 uv, in sampler2D tex0)\n{\n    float alpha = texture2D(tex0,uv).b;   \n    return mix(bg,fg,alpha);\n}","meta":""}}