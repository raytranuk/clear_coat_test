{"ppGraph":{"code":"{\"ioPorts\":[{\"type\":\"sampler2D\",\"name\":\"IN_bluenoise\",\"valueTex\":{\"base64_name\":\"bluenoise\",\"base64_data\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAQK0lEQVR4AQEgEN/vAIKCgv+Hh4f/oaGh/6Kiov+Li4v/iYmJ/5ubm/+CgoL/PT09/zIyMv9jY2P/aGho/0NDQ/9WVlb/oqKi/6+vr/97e3v/goKC/8PDw/+/v7//eHh4/2tra/+ZmZn/lZWV/15eXv9fX1//mZmZ/6Ghof91dXX/VFRU/zs7O/85OTn/AF9fX/9wcHD/sbGx/7CwsP9vb2//YWFh/4iIiP+FhYX/Wlpa/05OTv9kZGT/bGxs/2ZmZv95eXn/pqam/5qamv9VVVX/XV1d/7S0tP+8vLz/dXV1/21tbf+mpqb/qKio/3Nzc/9xcXH/oaGh/5mZmf9ZWVn/OTk5/zc3N/8/Pz//AEJCQv9ERET/l5eX/52dnf9UVFT/TU1N/4aGhv+oqKj/tLS0/6qqqv+NjY3/jo6O/62trf+wsLD/l5eX/2xsbP8wMDD/NjY2/319ff+EhIT/S0tL/1tbW/+zs7P/wcHB/4WFhf91dXX/kZGR/4uLi/9jY2P/ZGRk/46Ojv+Wlpb/ADo6Ov81NTX/hYWF/42Njf9LS0v/RkZG/35+fv+urq7/19fX/8zMzP+NjY3/hISE/6+vr/+0tLT/kpKS/21tbf9HR0f/TU1N/39/f/+BgYH/VFRU/15eXv+goKD/pqam/3BwcP9paWn/kZGR/4+Pj/9jY2P/bGxs/6qqqv+6urr/AEdHR/9DQ0P/e3t7/4CAgP9UVFT/Tk5O/3BwcP+Xl5f/w8PD/7Kysv9lZWX/TU1N/2tra/+Dg4P/lpaW/52dnf+ZmZn/oqKi/7u7u/+0tLT/jo6O/3Z2dv9sbGz/VVVV/zMzM/9NTU3/o6Oj/6enp/9YWFj/T09P/46Ojv+srKz/AFdXV/9YWFj/jY2N/5mZmf97e3v/aGho/19fX/9vb2//l5eX/5OTk/9jY2P/UlJS/15eXv9tbW3/f39//46Ojv+bm5v/qamp/7e3t/+wsLD/lJSU/3x8fP9lZWX/UlJS/0JCQv9hYWH/rq6u/6qqqv9VVVX/RERE/3d3d/+dnZ3/AGlpaf90dHT/vLy8/9bW1v/CwsL/lJSU/0xMTP82Njb/UlJS/21tbf+JiYn/kpKS/4iIiP9xcXH/TExM/0FBQf9OTk7/X19f/3Nzc/91dXX/ZmZm/25ubv+NjY3/nZ2d/52dnf+kpKT/sLCw/5iYmP9ZWVn/SUlJ/2ZmZv+Pj4//AHd3d/+CgoL/ra2t/8fHx//Pz8//qamp/1VVVf8xMTH/Pj4+/2RkZP+lpaX/tLS0/5GRkf9tbW3/SUlJ/zo6Ov9AQED/U1NT/3Nzc/95eXn/ZWVl/2lpaf+FhYX/nJyc/6+vr/+5ubn/u7u7/6Kiov9sbGz/UVFR/1FRUf91dXX/AIGBgf+BgYH/YmJi/2xsbP+ioqL/pqam/3p6ev9hYWH/Wlpa/3h4eP+5ubn/ubm5/3h4eP9iYmL/dnZ2/3p6ev9vb2//g4OD/7e3t/+7u7v/kZGR/2xsbP9MTEz/UFBQ/3h4eP+ioqL/z8/P/8jIyP+Ojo7/Xl5e/zc3N/9PT0//AIqKiv+NjY3/Tk5O/0hISP99fX3/lJSU/4uLi/+Dg4P/fn5+/4eHh/+fn5//nJyc/35+fv95eXn/jIyM/5WVlf+Tk5P/n5+f/7a2tv+3t7f/oaGh/3p6ev9CQkL/NTU1/1RUVP9+fn7/tbW1/8DAwP+goKD/d3d3/0VFRf9KSkr/AJOTk/+lpaX/cnJy/1tbW/9iYmL/cXFx/4eHh/+ampr/qKio/5KSkv9ZWVn/X19f/6SkpP+zs7P/jIyM/4qKiv+tra3/paWl/3Jycv9sbGz/lZWV/5KSkv9mZmb/S0tL/0NDQ/9OTk7/bW1t/4iIiP+goKD/nJyc/3x8fP9lZWX/AIuLi/+fn5//lJSU/3t7e/9WVlb/XV1d/5KSkv+qqqr/paWl/4SEhP9FRUX/T09P/6CgoP+tra3/c3Nz/3V1df+xsbH/pqam/1NTU/9PT0//mpqa/6ysrP+Ghob/bW1t/19fX/9TU1P/SEhI/2RkZP+np6f/tLS0/4yMjP9vb2//AHNzc/99fX3/tLS0/6enp/9XV1f/WFhY/6urq/+1tbX/dnZ2/1tbW/9jY2P/bGxs/3R0dP9mZmb/QUFB/1VVVf+goKD/oqKi/1paWv9fX1//sbGx/8jIyP+kpKT/mZmZ/6enp/+MjIz/SEhI/1VVVf+zs7P/vr6+/3R0dP9nZ2f/AG1tbf91dXX/urq6/7S0tP9iYmL/V1dX/5WVlf+bm5v/a2tr/2JiYv+BgYH/iYmJ/3p6ev9iYmL/QkJC/1NTU/+Wlpb/mpqa/2BgYP9eXl7/k5OT/6ioqP+enp7/n5+f/62trf+VlZX/VlZW/2FhYf+1tbX/uLi4/2pqav9dXV3/AHl5ef+Hh4f/paWl/5+fn/93d3f/XFxc/09PT/9cXFz/g4OD/5mZmf+fn5//qKio/7Ozs/+ioqL/dXV1/29vb/+RkZH/jY2N/2VlZf9MTEz/QUFB/05OTv9zc3P/fn5+/3Fxcf9tbW3/dHR0/4mJif+srKz/pKSk/3BwcP9QUFD/AGlpaf+AgID/mpqa/6Ghof+VlZX/dHR0/z8/P/9ERET/g4OD/56env+UlJT/lpaW/6ampv+oqKj/m5ub/42Njf99fX3/dHR0/3Fxcf9dXV3/Nzc3/0JCQv9+fn7/jo6O/3Nzc/9ra2v/dnZ2/4SEhP+Wlpb/lpaW/4WFhf9kZGT/AD4+Pv9hYWH/mpqa/7m5uf+9vb3/oaGh/2RkZP9TU1P/bW1t/3Fxcf9fX1//VVVV/1RUVP90dHT/tbW1/6ysrP9aWlr/TU1N/4SEhP+RkZH/dXV1/4WFhf+/v7//z8/P/7W1tf+Ojo7/W1tb/1FRUf9xcXH/j4+P/6qqqv+YmJj/AD09Pf9VVVX/h4eH/6Ghof+hoaH/mZmZ/4iIiP98fHz/dHR0/2xsbP9jY2P/VlZW/0VFRf9mZmb/uLi4/6+vr/9NTU3/RERE/5WVlf+rq6v/hYWF/4yMjP+/v7//zc3N/7e3t/+IiIj/QUFB/zg4OP9sbGz/lJSU/7Kysv+ioqL/AGhoaP9dXV3/YWFh/1hYWP9CQkL/Xl5e/62trf/BwcH/mpqa/4+Pj/+goKD/mZmZ/3p6ev9+fn7/o6Oj/5aWlv9VVVX/Wlpa/6Wlpf+pqan/Z2dn/1hYWP98fHz/h4eH/3h4eP9ZWVn/KSkp/zg4OP+FhYX/p6en/52dnf+AgID/AJOTk/+BgYH/b29v/1RUVP8yMjL/UlJS/7a2tv/Kysr/j4+P/4CAgP+enp7/qKio/5+fn/+YmJj/k5OT/4CAgP9eXl7/cHBw/7S0tP+rq6v/VVVV/z4+Pv9lZWX/eHh4/3d3d/9fX1//Ly8v/0RERP+enp7/u7u7/5ycnP90dHT/AMHBwf/Dw8P/sLCw/5WVlf9xcXH/dnZ2/6SkpP+ZmZn/U1NT/z8/P/9cXFz/g4OD/7S0tP+1tbX/hoaG/2xsbP9mZmb/hISE/8TExP+zs7P/UFBQ/zw8PP95eXn/oKCg/7Ozs/+ampr/U1NT/11dXf+4uLj/09PT/66urv98fHz/AL+/v/+8vLz/qKio/5KSkv95eXn/f39//6Kiov+RkZH/S0tL/zc3N/9XV1f/enp6/6CgoP+ZmZn/Y2Nj/1dXV/91dXX/mJiY/8DAwP+oqKj/UVFR/0ZGRv+IiIj/sbGx/8DAwP+qqqr/b29v/3BwcP+tra3/xcXF/7e3t/+NjY3/AIyMjP9tbW3/VlZW/0pKSv9JSUn/a2tr/6+vr/+zs7P/dXV1/2lpaf+NjY3/i4uL/2RkZP9DQ0P/KSkp/0BAQP+IiIj/q6ur/6enp/+MjIz/WVlZ/1tbW/+UlJT/qqqq/52dnf+RkZH/hISE/35+fv+AgID/k5OT/7m5uf+np6f/AG1tbf9TU1P/RERE/0NDQ/9PT0//cHBw/6SkpP+mpqb/dnZ2/3Nzc/+dnZ3/m5ub/21tbf9MTEz/OTk5/0tLS/+CgoL/n5+f/6CgoP+JiYn/Wlpa/2NjY/+kpKT/rKys/3x8fP9paWn/dHR0/3Nzc/9mZmb/cHBw/5OTk/+UlJT/AGBgYP9tbW3/cXFx/3t7e/+Kior/jIyM/4GBgf9sbGz/TU1N/1ZWVv+IiIj/qamp/7q6uv+ysrL/k5OT/3h4eP9jY2P/dHR0/6ysrP+hoaH/VFRU/1xcXP+5ubn/uLi4/1tbW/8zMzP/Pz8//05OTv9gYGD/XV1d/0ZGRv9TU1P/AHZ2dv+Xl5f/nJyc/5qamv+Pj4//h4eH/4KCgv91dXX/YWFh/2ZmZv+Dg4P/oKCg/7y8vP/AwMD/ra2t/4qKiv9XV1f/Xl5e/6CgoP+hoaH/YmJi/2ZmZv+vr6//rq6u/2VlZf9ERET/TExM/19fX/9+fn7/dXV1/0RERP9FRUX/ALCwsP/S0tL/xcXF/56env9dXV3/YGBg/6ampv/CwsL/s7Oz/6Ghof+NjY3/fn5+/3R0dP93d3f/iIiI/4CAgP9eXl7/Xl5e/35+fv+Kior/goKC/4GBgf+Ghob/j4+P/5qamv+enp7/mpqa/6Wlpf+/v7//t7e3/42Njf9sbGz/AK+vr//R0dH/x8fH/56env9WVlb/V1dX/6Ghof+9vb3/q6ur/5eXl/+AgID/cHBw/2dnZ/9lZWX/aWlp/29vb/94eHj/gICA/4aGhv+FhYX/enp6/29vb/9jY2P/cHBw/5aWlv+rq6v/rq6u/7W1tf/AwMD/ubm5/6Ghof96enr/AHNzc/+SkpL/oqKi/5qamv95eXn/bGxs/3Jycv9nZ2f/S0tL/0hISP9eXl7/eHh4/5aWlv+JiYn/UFBQ/1lZWf+kpKT/xcXF/7q6uv+SkpL/S0tL/zExMf9FRUX/UlJS/1paWv9sbGz/iYmJ/4+Pj/9/f3//enp6/39/f/9wcHD/AElJSf9jY2P/jo6O/5iYmP9+fn7/cHBw/2xsbP9cXFz/QEBA/zs7O/9MTEz/cnJy/6+vr/+oqKj/Xl5e/1tbW/+fn5//wsLC/8TExP+cnJz/SUlJ/zQ0NP9bW1v/aGho/1tbW/9nZ2f/jIyM/4iIiP9aWlr/VVVV/3p6ev+BgYH/ADAwMP9DQ0P/jIyM/5iYmP9mZmb/Y2Nj/4+Pj/+cnJz/ioqK/25ubv9JSUn/X19f/7Gxsf/Dw8P/lZWV/3d3d/9nZ2f/dnZ2/6SkpP+kpKT/dXV1/3Z2dv+np6f/s7Oz/5qamv+cnJz/uLi4/5+fn/9PT0//S0tL/5KSkv+tra3/ADs7O/9GRkb/mZmZ/5+fn/9YWFj/U1NT/5CQkP+ysrL/ubm5/52dnf9fX1//X19f/56env+zs7P/np6e/3l5ef9CQkL/SUlJ/4yMjP+fn5//g4OD/4WFhf+lpaX/r6+v/6Ghof+enp7/o6Oj/5GRkf9nZ2f/ZmZm/4+Pj/+ioqL/TaT1g+zuD88AAAAASUVORK5CYII=\"}},{\"type\":\"float\",\"name\":\"IN_focalDepth\",\"valueX\":384.128},{\"type\":\"vec4\",\"name\":\"OUT_fragOut\",\"valueX\":1,\"valueY\":0,\"valueZ\":0,\"valueW\":1},{\"type\":\"vec4\",\"name\":\"OUT_dofRT\",\"valueX\":0.5,\"valueY\":0.5,\"valueZ\":1,\"valueW\":2},{\"type\":\"sampler2D\",\"name\":\"IN_dofRT\",\"valueTex\":\"dofRT\"},{\"type\":\"vec4\",\"name\":\"OUT_focalDist0RT\",\"valueX\":0.01,\"valueY\":0.01,\"valueZ\":1,\"valueW\":0},{\"type\":\"vec4\",\"name\":\"OUT_focalDist1RT\",\"valueX\":0.01,\"valueY\":0.01,\"valueZ\":1,\"valueW\":1},{\"type\":\"sampler2D\",\"name\":\"IN_focalDist0RT\",\"valueTex\":\"focalDist0RT\"},{\"type\":\"sampler2D\",\"name\":\"IN_focalDist1RT\",\"valueTex\":\"focalDist1RT\"},{\"type\":\"float\",\"name\":\"IN_focalDepthBlend\",\"valueX\":0.125},{\"type\":\"vec4\",\"name\":\"OUT_blurxRT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":3},{\"type\":\"sampler2D\",\"name\":\"IN_blurxRT\",\"valueTex\":\"blurxRT\"},{\"type\":\"vec4\",\"name\":\"OUT_bluryRT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":4},{\"type\":\"sampler2D\",\"name\":\"IN_bluryRT\",\"valueTex\":\"bluryRT\"},{\"type\":\"vec4\",\"name\":\"OUT_blurx1RT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":5},{\"type\":\"sampler2D\",\"name\":\"IN_blurx1RT\",\"valueTex\":\"blurx1RT\"},{\"type\":\"vec4\",\"name\":\"OUT_blury1RT\",\"valueX\":1,\"valueY\":1,\"valueZ\":1,\"valueW\":6},{\"type\":\"sampler2D\",\"name\":\"IN_blury1RT\",\"valueTex\":\"blury1RT\"}],\"subGraphs\":[{\"subgName\":\"uv0\"},{\"subgName\":\"scSampPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"denoisePS\"},{\"subgName\":\"uv0\"},{\"subgName\":\"copyFocalDepthPS\"},{\"subgName\":\"updateFocalDepthPS\"},{\"subgName\":\"readFocalDepthPS\"},{\"subgName\":\"passXPS\"},{\"subgName\":\"passYPS\"},{\"subgName\":\"passZPS\"},{\"subgName\":\"passX1PS\"},{\"subgName\":\"passY1PS\"},{\"subgName\":\"passY1PS\"},{\"subgName\":\"dofTestPS\"},{\"subgName\":\"passZ1PS\"},{\"subgName\":\"blendDofPS\"}],\"connections\":[{\"srcIndex\":0,\"srcPortName\":\"OUT_ret\",\"dstIndex\":2,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_bluenoise\",\"dstIndex\":2,\"dstPortName\":\"IN_noise\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDepth\",\"dstIndex\":11,\"dstPortName\":\"IN_focalDepth\"},{\"srcIndex\":2,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_dofRT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":13,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":13,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":15,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_bg\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist1RT\",\"dstIndex\":10,\"dstPortName\":\"IN_fd1RT\"},{\"srcIndex\":10,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_focalDist0RT\"},{\"srcIndex\":11,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_focalDist1RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist0RT\",\"dstIndex\":11,\"dstPortName\":\"IN_fd0RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDepthBlend\",\"dstIndex\":11,\"dstPortName\":\"IN_alpha\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_focalDist1RT\",\"dstIndex\":12,\"dstPortName\":\"IN_fd1RT\"},{\"srcIndex\":12,\"srcPortName\":\"OUT_ret\",\"dstIndex\":2,\"dstPortName\":\"IN_focalDepth\"},{\"srcIndex\":13,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_blurxRT\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":14,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurxRT\",\"dstIndex\":14,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":-1,\"srcPortName\":\"invalid\",\"dstIndex\":-1,\"dstPortName\":\"invalid\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":15,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurxRT\",\"dstIndex\":15,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":16,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":16,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":16,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_blurx1RT\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurx1RT\",\"dstIndex\":17,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":17,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"invalid\",\"dstIndex\":-1,\"dstPortName\":\"invalid\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":15,\"dstPortName\":\"IN_tex0\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_blurx1RT\",\"dstIndex\":20,\"dstPortName\":\"IN_tex\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":20,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":20,\"dstPortName\":\"IN_tex0\"},{\"srcIndex\":20,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_fg\"},{\"srcIndex\":21,\"srcPortName\":\"OUT_ret\",\"dstIndex\":-1,\"dstPortName\":\"OUT_fragOut\"},{\"srcIndex\":9,\"srcPortName\":\"OUT_ret\",\"dstIndex\":21,\"dstPortName\":\"IN_uv\"},{\"srcIndex\":-1,\"srcPortName\":\"IN_dofRT\",\"dstIndex\":21,\"dstPortName\":\"IN_tex0\"},{\"srcIndex\":-1,\"srcPortName\":\"invalid\",\"dstIndex\":-1,\"dstPortName\":\"invalid\"}]}","meta":"{\"port\":[{\"x\":-3.6636338233947754,\"y\":-1.214484453201294,\"port_name\":\"IN_bluenoise\",\"port_index\":0,\"pstring\":\"in sampler2D bluenoise bluenoise\"},{\"x\":0.42796286940574646,\"y\":2.7153241634368896,\"port_name\":\"IN_focalDepth\",\"port_index\":1,\"pstring\":\"in float focalDepth 384.128\"},{\"x\":16.431957244873047,\"y\":-3.1537179946899414,\"port_name\":\"OUT_fragOut\",\"port_index\":2,\"pstring\":\"out vec4 fragOut 1,0,0,1\"},{\"x\":2.278275489807129,\"y\":0.12839120626449585,\"port_name\":\"OUT_dofRT\",\"port_index\":3,\"pstring\":\"out vec4 dofRT 0.5,0.5,1,2\"},{\"x\":2.295961856842041,\"y\":-1.2568426132202148,\"port_name\":\"IN_dofRT\",\"port_index\":4,\"pstring\":\"in sampler2D dofRT dofRT\"},{\"x\":0.4579322338104248,\"y\":5.262831687927246,\"port_name\":\"OUT_focalDist0RT\",\"port_index\":5,\"pstring\":\"out vec4 focalDist0RT 0.01,0.01,1,0\"},{\"x\":3.8141918182373047,\"y\":3.137967348098755,\"port_name\":\"OUT_focalDist1RT\",\"port_index\":6,\"pstring\":\"out vec4 focalDist1RT 0.01,0.01,1,1\"},{\"x\":0.4505465626716614,\"y\":4.0032758712768555,\"port_name\":\"IN_focalDist0RT\",\"port_index\":7,\"pstring\":\"in sampler2D focalDist0RT focalDist0RT\"},{\"x\":-3.681140661239624,\"y\":3.4836010932922363,\"port_name\":\"IN_focalDist1RT\",\"port_index\":8,\"pstring\":\"in sampler2D focalDist1RT focalDist1RT\"},{\"x\":0.42923495173454285,\"y\":1.4240440130233765,\"port_name\":\"IN_focalDepthBlend\",\"port_index\":9,\"pstring\":\"in float focalDepthBlend 0.125\"},{\"x\":6.21817684173584,\"y\":0.4570638835430145,\"port_name\":\"OUT_blurxRT\",\"port_index\":10,\"pstring\":\"out vec4 blurxRT 1.0,1.0,1,3\"},{\"x\":6.196924686431885,\"y\":-0.9034963846206665,\"port_name\":\"IN_blurxRT\",\"port_index\":11,\"pstring\":\"in sampler2D blurxRT blurxRT\"},{\"x\":10.672451972961426,\"y\":0.48699289560317993,\"port_name\":\"OUT_bluryRT\",\"port_index\":12,\"pstring\":\"out vec4 bluryRT 1.0,1.0,1,4\"},{\"x\":10.667970657348633,\"y\":-0.8525869846343994,\"port_name\":\"IN_bluryRT\",\"port_index\":13,\"pstring\":\"in sampler2D bluryRT bluryRT\"},{\"x\":6.2344069480896,\"y\":-3.6341259479522705,\"port_name\":\"OUT_blurx1RT\",\"port_index\":14,\"pstring\":\"out vec4 blurx1RT 1.0,1.0,1,5\"},{\"x\":6.2657318115234375,\"y\":-5.0125861167907715,\"port_name\":\"IN_blurx1RT\",\"port_index\":15,\"pstring\":\"in sampler2D blurx1RT blurx1RT\"},{\"x\":10.670767784118652,\"y\":-3.404754638671875,\"port_name\":\"OUT_blury1RT\",\"port_index\":16,\"pstring\":\"out vec4 blury1RT 1.0,1.0,1,6\"},{\"x\":10.712166786193848,\"y\":-4.731754779815674,\"port_name\":\"IN_blury1RT\",\"port_index\":17,\"pstring\":\"in sampler2D blury1RT blury1RT\"}],\"subg\":[{\"x\":-3.6376020908355713,\"y\":0.09536784887313843,\"func_name\":\"uv0\",\"uid\":0,\"preview_port_name\":\"OUT_ret\"},{\"x\":-2.4195945262908936,\"y\":8.578885078430176,\"func_name\":\"scSampPS\",\"uid\":2},{\"x\":-0.5119689702987671,\"y\":0.2722567319869995,\"func_name\":\"dofTestPS\",\"uid\":4,\"preview_port_name\":\"OUT_ret\"},{\"x\":0.5698967576026917,\"y\":8.85678768157959,\"func_name\":\"dofTestPS\",\"uid\":5},{\"x\":2.225726842880249,\"y\":8.980792999267578,\"func_name\":\"dofTestPS\",\"uid\":7},{\"x\":3.6896307468414307,\"y\":8.862025260925293,\"func_name\":\"dofTestPS\",\"uid\":8},{\"x\":5.1909003257751465,\"y\":9.104592323303223,\"func_name\":\"dofTestPS\",\"uid\":10},{\"x\":-0.8588934540748596,\"y\":8.815156936645508,\"func_name\":\"dofTestPS\",\"uid\":12},{\"x\":6.943462371826172,\"y\":8.914237022399902,\"func_name\":\"denoisePS\",\"uid\":1,\"preview_port_name\":\"OUT_ret\"},{\"x\":2.1140902042388916,\"y\":-3.159510850906372,\"func_name\":\"uv0\",\"uid\":3,\"preview_port_name\":\"OUT_ret\"},{\"x\":-1.6338797807693481,\"y\":5.283062934875488,\"func_name\":\"copyFocalDepthPS\",\"uid\":13,\"preview_port_name\":\"OUT_ret\"},{\"x\":2.130326747894287,\"y\":3.141526699066162,\"func_name\":\"updateFocalDepthPS\",\"uid\":15,\"preview_port_name\":\"OUT_ret\"},{\"x\":-1.72267746925354,\"y\":1.0833332538604736,\"func_name\":\"readFocalDepthPS\",\"uid\":16},{\"x\":4.340981483459473,\"y\":-0.7717469930648804,\"func_name\":\"passXPS\",\"uid\":2},{\"x\":8.472722053527832,\"y\":-0.6000009775161743,\"func_name\":\"passYPS\",\"uid\":4,\"preview_port_name\":\"OUT_ret\"},{\"x\":12.834689140319824,\"y\":-1.9116097688674927,\"func_name\":\"passZPS\",\"uid\":17},{\"x\":4.307692050933838,\"y\":-3.900420904159546,\"func_name\":\"passX1PS\",\"uid\":0},{\"x\":8.317769050598145,\"y\":-3.6811182498931885,\"func_name\":\"passY1PS\",\"uid\":2},{\"x\":8.611469268798828,\"y\":9.420977592468262,\"func_name\":\"passY1PS\",\"uid\":18},{\"x\":10.517481803894043,\"y\":9.020976066589355,\"func_name\":\"dofTestPS\",\"uid\":0},{\"x\":12.874129295349121,\"y\":-3.945450782775879,\"func_name\":\"passZ1PS\",\"uid\":0,\"preview_port_name\":\"OUT_ret\"},{\"x\":14.755806922912598,\"y\":-3.0545451641082764,\"func_name\":\"blendDofPS\",\"uid\":1}],\"con\":[{\"x\":-3.1376020908355713,\"y\":-0.4546321630477905,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":-1.011968970298767,\"dy\":-0.4877432584762573},{\"x\":-3.1636338233947754,\"y\":-1.7644844055175781,\"valType\":\"\",\"src_name\":\"IN_bluenoise\",\"dst_name\":\"IN_noise\",\"dx\":-1.011968970298767,\"dy\":-0.69774329662323},{\"x\":0.9279628992080688,\"y\":2.1653242111206055,\"valType\":\"\",\"src_name\":\"IN_focalDepth\",\"dst_name\":\"IN_focalDepth\",\"dx\":1.630326747894287,\"dy\":2.1715266704559326},{\"x\":-0.01196897029876709,\"y\":-0.27774327993392944,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_dofRT\",\"dx\":1.778275489807129,\"dy\":-0.4216088056564331},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex\",\"dx\":3.8409814834594727,\"dy\":-1.5317469835281372},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":3.8409814834594727,\"dy\":-1.7417470216751099},{\"x\":13.334689140319824,\"y\":-2.4616098403930664,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_bg\",\"dx\":14.255806922912598,\"dy\":-3.814545154571533},{\"x\":-3.181140661239624,\"y\":2.933601140975952,\"valType\":\"\",\"src_name\":\"IN_focalDist1RT\",\"dst_name\":\"IN_fd1RT\",\"dx\":-2.1338796615600586,\"dy\":4.523062705993652},{\"x\":-1.1338797807693481,\"y\":4.733062744140625,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_focalDist0RT\",\"dx\":-0.042067766189575195,\"dy\":4.712831497192383},{\"x\":2.630326747894287,\"y\":2.591526746749878,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_focalDist1RT\",\"dx\":3.3141918182373047,\"dy\":2.5879673957824707},{\"x\":0.9505465626716614,\"y\":3.4532759189605713,\"valType\":\"\",\"src_name\":\"IN_focalDist0RT\",\"dst_name\":\"IN_fd0RT\",\"dx\":1.630326747894287,\"dy\":2.3815267086029053},{\"x\":0.9292349815368652,\"y\":0.8740440011024475,\"valType\":\"\",\"src_name\":\"IN_focalDepthBlend\",\"dst_name\":\"IN_alpha\",\"dx\":1.630326747894287,\"dy\":1.9615267515182495},{\"x\":-3.181140661239624,\"y\":2.933601140975952,\"valType\":\"\",\"src_name\":\"IN_focalDist1RT\",\"dst_name\":\"IN_fd1RT\",\"dx\":-2.22267746925354,\"dy\":0.3233332633972168},{\"x\":-1.22267746925354,\"y\":0.5333332419395447,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_focalDepth\",\"dx\":-1.011968970298767,\"dy\":-0.9077432155609131},{\"x\":4.840981483459473,\"y\":-1.321747064590454,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_blurxRT\",\"dx\":5.71817684173584,\"dy\":-0.09293612837791443},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":7.972722053527832,\"dy\":-1.5700010061264038},{\"x\":6.696924686431885,\"y\":-1.4534964561462402,\"valType\":\"\",\"src_name\":\"IN_blurxRT\",\"dst_name\":\"IN_tex\",\"dx\":7.972722053527832,\"dy\":-1.3600009679794312},{\"x\":8.972722053527832,\"y\":-1.150001049041748,\"valType\":\"\",\"src_name\":\"invalid\",\"dst_name\":\"invalid\",\"dx\":9.887272757377016,\"dy\":0.04951049264494323},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":12.334689140319824,\"dy\":-2.8816099166870117},{\"x\":6.696924686431885,\"y\":-1.4534964561462402,\"valType\":\"\",\"src_name\":\"IN_blurxRT\",\"dst_name\":\"IN_tex\",\"dx\":12.334689140319824,\"dy\":-2.671609878540039},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":3.807692050933838,\"dy\":-4.870420932769775},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex\",\"dx\":3.807692050933838,\"dy\":-4.660420894622803},{\"x\":4.807692050933838,\"y\":-4.45042085647583,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_blurx1RT\",\"dx\":5.7344069480896,\"dy\":-4.184125900268555},{\"x\":6.7657318115234375,\"y\":-5.562586307525635,\"valType\":\"\",\"src_name\":\"IN_blurx1RT\",\"dst_name\":\"IN_tex\",\"dx\":7.8177690505981445,\"dy\":-4.441118240356445},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":7.8177690505981445,\"dy\":-4.651118278503418},{\"x\":8.817769050598145,\"y\":-4.231118202209473,\"valType\":\"\",\"src_name\":\"invalid\",\"dst_name\":\"invalid\",\"dx\":9.679160860428997,\"dy\":-3.6444756918020182},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":12.334689140319824,\"dy\":-3.0916097164154053},{\"x\":6.7657318115234375,\"y\":-5.562586307525635,\"valType\":\"\",\"src_name\":\"IN_blurx1RT\",\"dst_name\":\"IN_tex\",\"dx\":12.374129295349121,\"dy\":-4.705451011657715},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":12.374129295349121,\"dy\":-4.9154510498046875},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":12.374129295349121,\"dy\":-5.125450611114502},{\"x\":13.374129295349121,\"y\":-4.495450973510742,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_fg\",\"dx\":14.255806922912598,\"dy\":-4.024545192718506},{\"x\":15.931957244873047,\"y\":-3.7037179470062256,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"OUT_fragOut\",\"dx\":15.255806922912598,\"dy\":-3.6045451164245605},{\"x\":2.6140902042388916,\"y\":-3.7095108032226562,\"valType\":\"\",\"src_name\":\"OUT_ret\",\"dst_name\":\"IN_uv\",\"dx\":14.255806922912598,\"dy\":-4.2345452308654785},{\"x\":2.795961856842041,\"y\":-1.806842565536499,\"valType\":\"\",\"src_name\":\"IN_dofRT\",\"dst_name\":\"IN_tex0\",\"dx\":14.255806922912598,\"dy\":-4.444545269012451},{\"x\":0.48251733386887485,\"y\":-1.0979020920666782,\"valType\":\"\",\"src_name\":\"invalid\",\"dst_name\":\"invalid\",\"dx\":-0.01196897029876709,\"dy\":-0.27774327993392944}]}"},"uv0":{"code":"vec2 uv0(){return vUv0;}","meta":""},"scSampPS":{"code":"vec4 scSampPS(in vec2 uv){return texture2D(uColorBuffer,uv);}","meta":""},"dofTestPS":{"code":"vec4 dofTestPS(in vec2 uv, in sampler2D noise, in float focalDepth)\n{\n#ifndef PREVIEW_MAT\n    float d0 = abs(getLinearScreenDepth(uv));\n#else\n    float d0 = texture2D(uDepthMap,uv).r*32.0;\n#endif    \n    vec4 col0 = texture2D(uColorBuffer,uv);\n\n    float focallength = 0.05; //50mm\n    float aperture = focallength/0.9; //f/1.8\n    float filmpixelsize = 0.035/(1080.0/16.0); //35mm\n\n    float CoC = (aperture * (focallength * (d0 - focalDepth)) / (d0 * (focalDepth - focallength)));\n\n    return vec4(floor(d0)/256.0f,fract(d0),clamp(-CoC/filmpixelsize,0.0,1.0),clamp(CoC/filmpixelsize,0.0,1.0));\n    //return vec4(floor(d0)/256.0f,fract(d0),1,1);\n    //return vec4(vec3(fract(d0),0,fract(CoC/filmpixelsize)),1);\n}","meta":""},"denoisePS":{"code":"vec4 denoisePS(in sampler2D tex, in vec2 uv) \n{\n    //from: https://www.shadertoy.com/view/ldKBzG\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n    vec2 fragCoord = uv*texRes;\n\n    vec2 offset[25];\n    offset[0] = vec2(-2,-2);\n    offset[1] = vec2(-1,-2);\n    offset[2] = vec2(0,-2);\n    offset[3] = vec2(1,-2);\n    offset[4] = vec2(2,-2);\n    \n    offset[5] = vec2(-2,-1);\n    offset[6] = vec2(-1,-1);\n    offset[7] = vec2(0,-1);\n    offset[8] = vec2(1,-1);\n    offset[9] = vec2(2,-1);\n    \n    offset[10] = vec2(-2,0);\n    offset[11] = vec2(-1,0);\n    offset[12] = vec2(0,0);\n    offset[13] = vec2(1,0);\n    offset[14] = vec2(2,0);\n    \n    offset[15] = vec2(-2,1);\n    offset[16] = vec2(-1,1);\n    offset[17] = vec2(0,1);\n    offset[18] = vec2(1,1);\n    offset[19] = vec2(2,1);\n    \n    offset[20] = vec2(-2,2);\n    offset[21] = vec2(-1,2);\n    offset[22] = vec2(0,2);\n    offset[23] = vec2(1,2);\n    offset[24] = vec2(2,2);\n    \n    \n    float kernel[25];\n    kernel[0] = 1.0f/256.0f;\n    kernel[1] = 1.0f/64.0f;\n    kernel[2] = 3.0f/128.0f;\n    kernel[3] = 1.0f/64.0f;\n    kernel[4] = 1.0f/256.0f;\n    \n    kernel[5] = 1.0f/64.0f;\n    kernel[6] = 1.0f/16.0f;\n    kernel[7] = 3.0f/32.0f;\n    kernel[8] = 1.0f/16.0f;\n    kernel[9] = 1.0f/64.0f;\n    \n    kernel[10] = 3.0f/128.0f;\n    kernel[11] = 3.0f/32.0f;\n    kernel[12] = 9.0f/64.0f;\n    kernel[13] = 3.0f/32.0f;\n    kernel[14] = 3.0f/128.0f;\n    \n    kernel[15] = 1.0f/64.0f;\n    kernel[16] = 1.0f/16.0f;\n    kernel[17] = 3.0f/32.0f;\n    kernel[18] = 1.0f/16.0f;\n    kernel[19] = 1.0f/64.0f;\n    \n    kernel[20] = 1.0f/256.0f;\n    kernel[21] = 1.0f/64.0f;\n    kernel[22] = 3.0f/128.0f;\n    kernel[23] = 1.0f/64.0f;\n    kernel[24] = 1.0f/256.0f;\n    \n    vec3 sum = vec3(0.0);\n    vec3 sum_f = vec3(0.0);\n    float c_phi = 1.0;\n    float r_phi = 1.0;\n    float n_phi = 0.5;\n    float p_phi = 0.25;\n    \n\t//vec3 cval = texelFetch(iChannel0, ivec2(fragCoord), 0).xyz;\n    float maxCoc = texture2D(tex, uv).w;\n    vec3 cval = texture2D(tex, uv).xyz;\n    //vec3 rval = texelFetch(iChannel2, ivec2(fragCoord), 0).xyz;\n\t//vec3 nval = texelFetch(iChannel1, ivec2(fragCoord), 0).xyz;\n\n    //float ang = 2.0*3.1415926535*hash1(251.12860182*fragCoord.x + 729.9126812*fragCoord.y+5.1839513*iTime);\n    float ang = 2.0*3.1415926535*fract(sin(251.12860182*fragCoord.x + 729.9126812*fragCoord.y+5.1839513*uTime)*43758.5453123);\n\n\tmat2 m = mat2(cos(ang),sin(ang),-sin(ang),cos(ang));\n    \n    float cum_w = 0.0;\n    float cum_fw = 0.0;\n\n    //float denoiseStrength = (DENOISE_RANGE.x + (DENOISE_RANGE.y-DENOISE_RANGE.x)*hash1(641.128752*fragCoord.x + 312.321374*fragCoord.y+1.92357812*iTime));    \n    float denoiseStrength = (vec2(1, 4).x + (vec2(1, 4).y-vec2(1, 4).x)*fract(sin(641.128752*fragCoord.x + 312.321374*fragCoord.y+1.92357812*uTime)*43758.5453123));\n    \n    // denoiseStrength*=float(maxCoc>0.5);\n    float mcsum=0.0;\n\n    for(int i=0; i<25; i++)\n    {\n        vec2 t_uv = (fragCoord+m*(offset[i]* denoiseStrength))*oo_texRes;\n        \n        //maxCoc = max(maxCoc, texture2D(tex, t_uv).w);\n        float mc = texture2D(tex, t_uv).w;\n        vec3 ctmp = texture2D(tex, t_uv).xyz;\n        vec3 t = cval - ctmp;\n        float dist2 = dot(t,t);\n        float c_w = min(exp(-(dist2)/c_phi), 1.0);\n        \n /*       vec3 ntmp = texture(iChannel1, uv).xyz;\n        t = nval - ntmp;\n        dist2 = max(dot(t,t), 0.0);\n        float n_w = min(exp(-(dist2)/n_phi), 1.0);\n        \n        vec3 rtmp = texture(iChannel2, uv).xyz;\n        t = rval - rtmp;\n        dist2 = dot(t,t);\n        float r_w = min(exp(-(dist2)/r_phi), 1.0);*/\n        \n        // new denoised frame\n        float weight0 = c_w;//*n_w;\n        sum += ctmp*weight0*kernel[i];\n        cum_w += weight0*kernel[i];\n        mcsum += mc*weight0*kernel[i];\n        // denoise the previous denoised frame again\n//        float weight1 = r_w*n_w;\n//        sum_f += rtmp*weight1*kernel[i];\n//        cum_fw += weight1*kernel[i];\n    }\n    \n    // mix in more of the just-denoised frame if it differs significantly from the\n    // frame from feedback\n//    vec3 ptmp = texture(iChannel2, fragCoord/iResolution.xy).xyz;\n//    vec3 t = sum/cum_w - ptmp;\n//    float dist2 = dot(t,t);\n//    float p_w = min(exp(-(dist2)/p_phi), 1.0);\n    \n//    fragColor = clamp(vec4(mix(sum/cum_w,sum_f/cum_fw,p_w),0.0),0.0,1.0);\n\n    // return clamp(vec4(vec3(sum/cum_w)*vec3(1,1,1),1.0),0.0,1.0);\n\n    maxCoc=mix(maxCoc,clamp((mcsum/cum_w),0.0,1.0),float(cum_w>0.0));\n\n    float alpha = clamp((maxCoc-0.0)*4.0, 0.0, 1.0);\n\n    vec3 col0 = texture2D(uColorBuffer,uv).rgb;\n\n    vec3 ret=mix(col0,clamp(vec3(sum/cum_w),0.0,1.0),alpha);\n\n    return clamp(vec4(ret,1.0),0.0,1.0);\n}","meta":""},"copyFocalDepthPS":{"code":"vec4 copyFocalDepthPS(in sampler2D fd1RT)\n{\n    return texture2D(fd1RT, vec2(0,0));\n}","meta":""},"updateFocalDepthPS":{"code":"vec4 updateFocalDepthPS(in sampler2D fd0RT, in float focalDepth, in float alpha)\n{\n    ivec2 tsizei = textureSize(uDepthMap,0);\n    float aspect=float(tsizei.y)/float(tsizei.x);\n    \n    float tsize=float(tsizei.y);\n    float ootsize = 1.0/tsize;\n\n    float tsizex=float(tsizei.x);\n    float ootsizex = 1.0/tsizex;\n\n    vec2 fuv=vec2(floor(focalDepth)*ootsizex, 1.0-fract(focalDepth)*3000.0*ootsize);\n    #ifndef PREVIEW_MAT\n        float focalDepth0 = abs(getLinearScreenDepth(fuv));\n    #else\n        float focalDepth0 = texture2D(uDepthMap,fuv).r*32.0;\n    #endif    \n\n    vec4 rgbaDepth = texture2D(fd0RT, vec2(0,0));\n    const vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    float prevDepth = dot(rgbaDepth, bitShift)*200.0;\n\n    float blendedDepth = mix(prevDepth,min(focalDepth0,200.0), alpha);\n\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n\n    // combination of mod and multiplication and division works better\n    vec4 res = mod((blendedDepth/200.0) * bit_shift * vec4(255), vec4(256) ) / vec4(255);\n    res -= res.xxyz * bit_mask;\n    return res;\n}","meta":""},"readFocalDepthPS":{"code":"float readFocalDepthPS(in sampler2D fd1RT)\n{\n    vec4 rgbaDepth = texture2D(fd1RT, vec2(0,0));\n    const vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    return dot(rgbaDepth, bitShift)*200.0;\n}","meta":""},"passYPS":{"code":"vec4 passYPS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 1;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    const float a = 1.0;\n    const float b = 0.5;\n    \n    vec2 uv0=uv*0.5+vec2(0,0);\n    vec2 uv1=uv*0.5+vec2(0,0.5);\n    vec2 uv2=uv*0.5+vec2(0.5,0);\n    vec2 uv3=uv*0.5+vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+vec2(0,oo_texRes.y*float(n)*0.5)).rgb;                 \n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(sqrt(ret*(1.0/w)),1);\n}","meta":""},"passXPS":{"code":"vec4 passXPS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(uColorBuffer,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec2 quv=fract(uv*2.0);\n\n    float quad = float(uv.x>=0.5)*2.0+float(uv.y>=0.5)*1.0;\n\n    float cocScale = texture2D(tex,quv).a;\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec3 col = texture2D(uColorBuffer,quv+vec2(oo_texRes.x*float(n)*cocScale,0)).rgb;\n\n        float k = 0.0;\n        if (quad == 0.0) //real 1\n        {\n            k = cos(x*x*5.3)*exp(x*x*-0.84);\n        }\n        if (quad == 1.0) //imag 1\n        {\n            k = sin(x*x*5.3)*exp(x*x*-0.84);    \n        }   \n        if (quad == 2.0) //real 2\n        {\n            k = cos(x*x*1.6)*exp(x*x*-2.1);       \n        }        \n        if (quad == 3.0) //imag 2\n        {\n            k = sin(x*x*1.6)*exp(x*x*-2.1);            \n        }               \n\n        ret += pow(col,vec3(2.0))*k;\n        w += 1.0;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passZPS":{"code":"vec4 passZPS(in sampler2D tex, in vec2 uv,in sampler2D tex0)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    float cocScale = texture2D(tex0,uv).a;\n    \n    vec2 uv0=vec2(0,0);\n    vec2 uv1=vec2(0,0.5);\n    vec2 uv2=vec2(0.5,0);\n    vec2 uv3=vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec2 quv = clamp(uv*0.5+vec2(0,oo_texRes.y*float(n)*0.5*cocScale),vec2(0.0)+oo_texRes,vec2(0.5)-oo_texRes);\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+quv).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+quv).rgb;\n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+quv).rgb;\n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+quv).rgb;\n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(pow(ret*(1.0/w),vec3(1.0/2.0)),1);\n    //return vec4(sqrt(sqrt(ret*(1.0/w))),1);\n}","meta":""},"passX1PS":{"code":"vec4 passX1PS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(uColorBuffer,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec2 quv=fract(uv*2.0);\n\n    float quad = float(uv.x>=0.5)*2.0+float(uv.y>=0.5)*1.0;\n\n    float cocScale = texture2D(tex,quv).b;\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec3 col = texture2D(uColorBuffer,quv+vec2(oo_texRes.x*float(n)*cocScale,0)).rgb;\n\n        float k = 0.0;\n        if (quad == 0.0) //real 1\n        {\n            k = cos(x*x*5.3)*exp(x*x*-0.84);\n        }\n        if (quad == 1.0) //imag 1\n        {\n            k = sin(x*x*5.3)*exp(x*x*-0.84);    \n        }   \n        if (quad == 2.0) //real 2\n        {\n            k = cos(x*x*1.6)*exp(x*x*-2.1);       \n        }        \n        if (quad == 3.0) //imag 2\n        {\n            k = sin(x*x*1.6)*exp(x*x*-2.1);            \n        }               \n\n        ret += pow(col,vec3(2.0))*k;\n        w += 1.0;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passY1PS":{"code":"vec4 passY1PS(in sampler2D tex, in vec2 uv)\n{\n    const int S = 1;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    vec3 ret = vec3(0);\n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float k = sin(abs(float(n)/float(S))*3.141*2.0)+1.0;\n        k=k*k;\n        ret += texture2D(tex,uv+vec2(0,oo_texRes.y*float(n))).rgb*k;\n        w += k;\n    }\n\n    return vec4(ret*(1.0/w),1);\n}","meta":""},"passZ1PS":{"code":"vec4 passZ1PS(in sampler2D tex, in vec2 uv,in sampler2D tex0)\n{\n    const int S = 16;\n\n    vec2 texRes=vec2(textureSize(tex,0));\n    vec2 oo_texRes=vec2(1.0/texRes.x, 1.0/texRes.y);\n\n    float cocScale = texture2D(tex0,uv).b;\n    \n    vec2 uv0=vec2(0,0);\n    vec2 uv1=vec2(0,0.5);\n    vec2 uv2=vec2(0.5,0);\n    vec2 uv3=vec2(0.5,0.5);\n\n    vec3 colPr = vec3(0);\n    vec3 colPi = vec3(0);\n    vec3 colQr = vec3(0);\n    vec3 colQi = vec3(0);    \n    float w = 0.0;\n    for (int n=-S;n<=S;n++)\n    {\n        float x = abs(float(n)/float(S));\n\n        vec2 quv = clamp(uv*0.5+vec2(0,oo_texRes.y*float(n)*0.5*cocScale),vec2(0.0)+oo_texRes,vec2(0.5)-oo_texRes);\n\n        float kPr = cos(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pr = texture2D(tex,uv0+quv).rgb;\n\n        float kPi = sin(x*x*5.3)*exp(x*x*-0.84);\n        vec3 Pi = texture2D(tex,uv1+quv).rgb;\n\n        colPr += Pr*kPr-Pi*kPi;\n        colPi += Pr*kPi+Pi*kPr;\n\n        float kQr = cos(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qr = texture2D(tex,uv2+quv).rgb;\n\n        float kQi = sin(x*x*1.6)*exp(x*x*-2.1);\n        vec3 Qi = texture2D(tex,uv3+quv).rgb;\n\n        colQr += Qr*kQr-Qi*kQi;\n        colQi += Qr*kQi+Qi*kQr;        \n\n        w += 1.0;\n    }\n\n    vec3 ret = colPr*(0.37)+colPi*(-0.54)+colQr*(0.48)+colQi*(4.8);\n\n    return vec4(pow(ret*(1.0/w),vec3(1.0/2.0)),1);\n    //return vec4(sqrt(sqrt(ret*(1.0/w))),1);\n}","meta":""},"blendDofPS":{"code":"vec4 blendDofPS(in vec4 bg, in vec4 fg, in vec2 uv, in sampler2D tex0)\n{\n    float alpha = texture2D(tex0,uv).b;   \n    return mix(bg,fg,alpha);\n}","meta":""}}